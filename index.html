
<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<head>
	<title>AlumniBase - Find the "right" alumni</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="bootstrap3/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script src="bootstrap3/js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

</head>

<body>

	 <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">AlumniBase</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse">
            	<ul class="nav navbar-nav" id ="school">
	        		<li class="dropdown">

		                <a href="#" data-toggle="dropdown" class="dropdown-toggle">HCI, Georgia Institue of Technology<b class="caret"></b></a>

		                <ul class="dropdown-menu">

		                    <li><a href="#">Architecture, Indian Institute of Technology Roorkee</a></li>

		                    <li class="divider"></li>

		                    <li><p class="other-schools">Explore other schools</p></li>
		                    <li><a href="#">HCI, Carnegie Mellon University</a></li>
		                    <li><a href="#">HCI, University of Michigan</a></li>
		                    <li><a href="#">HCI, UC Berkeley</a></li>
		                    <li><a href="#">see more...</a></li>

		                </ul>

		            </li>
		          </ul>

	            <ul class="nav navbar-nav">
	                <li>
	                    <a href="#">How to use?</a>
	                </li>
	                <li>
	                    <a href="#"><i class="fa fa-user icon"></i>Profile</a>
	                </li>
	                <li>
	                    <a href="#"><i class="fa fa-cog icon"></i>Settings</a>
	                </li>
	                
	            </ul>
            </div><!-- /.navbar-collapse -->
    </nav>

   	<!-- Questions -->
    <nav class="questions" role="navigation">
            <div class="questions-bar">
            	<p class = "questions_intro"> Begin asking some questions about your Alumni Network</p>
                <ul class="questions-list">
                    <li>
                        <a href="#">How many alumni work in the Bay Area? </a>
                    </li>
                    <li>
                        <a href="#">What do people do after graduation?</a>
                    </li>
                    <li>
                        <a href="#">Who all are currenly working in research?</a>
                    </li>
                    <li id ="more">
                        <a href="#">more...</a>
                    </li>
                </ul>
            </div><!-- /.navbar-header -->
    </nav>


   <section>
   	<div class = "container">
   		<div class = "row">
   		<div class = "sankeyChart"></div>
   		</div>
   	</div>
   </section>

     <section>
     <div class = "tab-menu">
		<div class = "first-tabs-radio">
		<p class = "tabs-heading" >Color Careers by</p>
		 <label class="radio-inline"><input type="radio" name="optradio">Location Change</label>
		<label class="radio-inline"><input type="radio" name="optradio">Industry</label>
		<label class="radio-inline"><input type="radio" name="optradio">Job Change</label> 
		</div>

		<div class="tabs-radio">
		<p class = "tabs-heading" >Sort By</p>
		 <label class="radio-inline"><input type="radio" name="optradio">Year of Graduation</label>
		</div>

		<div class="tabs-radio">
		<p class = "tabs-heading" >View Mode</p>
		 <label class="radio-inline"><input type="radio" name="optradio">Overview</label>
		<label class="radio-inline"><input type="radio" name="optradio">Detailed</label>

		<div class="tabs-radio">
		<p class = "tabs-heading" >Cluster by</p>
		 <label class="radio-inline"><input type="radio" name="optradio">Industry</label>
		<label class="radio-inline"><input type="radio" name="optradio">Program</label>
		<label class="radio-inline"><input type="radio" name="optradio">Location</label>
		</div> <!-- End of tab-menu-->
	</div>
   		
   		<br/>
			
   	<div class = "timeline1"></div>
   </section>

   <!-- _____________D3 begins here_____________-->
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="sankeyPugin.js"></script>
	<script src="d3-timeline-master/d3-timeline-master/src/d3-timeline.js"></script>
	
	<!-- Sankey-->
	<script>
	var margin = {top: 1, right: 30, bottom: 30, left:10},
	    width = 900 - margin.left - margin.right,
	    height = 500 - margin.top - margin.bottom;
	    
	var category20b_sq = [
	  '#393b79', '#5254a3', '#6b6ecf', '#9c9ede',
	  '#8c6d31', '#bd9e39', '#e7ba52', '#e7cb94',
	  '#843c39', '#ad494a', '#d6616b', '#e7969c',
	  '#637939', '#8ca252', '#b5cf6b', '#cedb9c', 
	  '#ce6dbd', '#a55194', '#de9ed6', '#7b4173'
	];

	var color = d3.scale.ordinal()
	  .range(category20b_sq);

	var svg = d3.select(".sankeyChart").append("svg")
	  .attr("width", width + margin.left + margin.right)
	  .attr("height", height + margin.top + margin.bottom)
	  .append("g")
	  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

	var sankey = d3.sankey()
				   .nodeWidth(16)
				   .nodePadding(8)
				   .size([width, height]);

	var path = sankey.link()
	  				 .curvature(0.4);

	d3.json("sankey.json", function(mydatabase) {
	  sankey
	    .nodes(mydatabase.nodes)
	    .links(mydatabase.links)
	    .layout(40);


	  var link = svg.append("g").selectAll(".link")
	      .data(mydatabase.links)
	    .enter().append("path")
	      .attr("class", "link")
	      .attr("d", path)
	      .style("stroke-width", function(d) { return Math.max(1, d.dy); })
	      .sort(function(a, b) { return b.dy - a.dy; })
	      .on("mouseover", function(d) {
	        d3.selectAll(".node")
	          .style("opacity", 0.3)
	          .filter(function(p) {
	            return d.source.name == p.name ||
	                   d.target.name == p.name;
	          })
	          .style("opacity", 1)
	          .selectAll("text")
	          .style("opacity", 1);
	      })
	      .on("mouseout", function(d) {
	        d3.selectAll(".node")
	          .style("opacity", null)
	          .selectAll("text")
	          .style("opacity", 1);
	      });

	  var node = svg.append("g").selectAll(".node")
	      .data(mydatabase.nodes)
	    .enter().append("g")
	      .attr("class", "node")
	      .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });


	  node.append("rect")
	      .attr("height", function(d) { return d.dy; })
	      .attr("width", sankey.nodeWidth())
	      .style("fill", function(d) { return color(d.category); })
	    .append("title")	
	      .text(function(d) { return d.name; });

	  node.append("text")
	      .attr("x", 6 + sankey.nodeWidth())
	      .attr("y", function(d) { return d.dy / 2; })
	      .attr("dy", ".35em")
	      .attr("text-anchor", "start")
	      .attr("transform", null)
	      .text(function(d) { return d.name; })
	    .filter(function(d) { return d.x > width * .9; })
	      .attr("class", function(d) { return d.category ; })
	      .attr("text-anchor", "end") 
	      // .attr("transform", function(d) { return "translate (" + ((d.dy / 2) + 30) + "," + (d.dy / 2) + ") rotate(90)"; });
	});
	</script>

	<!-- Timeline-->
	<script type="text/javascript">
    window.onload = function() {

      var labelColorTestData = [
        {class:"jackie", times: [{"color":"green", "label":"Weeee", "starting_time": 1355752800000, "ending_time": 1355759900000}, {"color":"blue", "label":"Weeee", "starting_time": 1355767900000, "ending_time": 1355774400000}]},
        {class:"troll", times: [{"color":"pink", "label":"Weeee", "starting_time": 1355759910000, "ending_time": 1355761900000}, ]},
        {class:"wat", times: [{"color":"yellow", "label":"Weeee", "starting_time": 1355761910000, "ending_time": 1355763910000}]},


      ];

      var width = 900;

      function timelineLabelColor() {
        var chart = d3.timeline()
          .beginning(1355752800000) // we can optionally add beginning and ending times to speed up rendering a little
          .ending(1355774400000)
          .stack() // toggles graph stacking
          .background("grey")
          .margin({left:70, right:30, top:0, bottom:0})
          ;
        var svg = d3.select(".timeline1").append("svg").attr("width", width)
          .datum(labelColorTestData).call(chart);
      }

      timelineLabelColor(); 
      
  	}

      </script>

</body>
</html>
